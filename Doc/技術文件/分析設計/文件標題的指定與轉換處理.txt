文件標題的指定與轉換處理

明眼字表示法：

  使用 <標題> 標籤，例如：
  
    <標題>自然的奧秘</標題>
  
編輯明眼字時，要在什麼地方加入 <標題> 標籤呢？ 加入 <標題> 的位置非常直覺，就是當你開始輸入下一個篇章，需要有不同的標題時，就可以插入 <標題> 標籤。當然，如果整份文件只有一個標題，那麼就只要在文件的一開頭加入 <標題> 標籤。  
    
注意：<標題> 為單列標籤，也就是說，<標題> 那一列不可以有其他文字，否則可能造成系統無法判別標題；若行尾有其他文字，轉換時將會忽略。
  
執行轉點字功能後（快速鍵為 F5），雙視編輯視窗中並不會顯示您輸入的標題，因為在列印時，這些標題會列印在頁尾，而程式必須在執行列印時動態判斷每一頁的頁尾該印哪個標題。若您想要檢視或修改標題，可以從雙視編輯視窗的主選單點選「編輯 > 頁標題」。
  
  
程式處理要點：
     
當 BrailleProcessor 在轉換每一列明眼字時，如果碰到 <標題> 標籤，其處理方式跟一般文字的轉換相同，唯一的差別是 <標題> 標籤會保留在點字串列裡面。直到整份點字文件轉換完畢，BrailleDocument 最後會呼叫 FetchPageTitles 方法，以將所有標題列取出並移至頁標題串列中保存（BrailleDocument 類別的 m_PageTitles） 。

每個頁標題是以 BraillePageTitle 類別實現，它有一個 BrailleLine 參考（TitleLine），指向某個標題列物件，以及一個起始列索引（BeginLineIndex），該索引就是這個標題所要套用的列的索引。簡言之，這兩個欄位所要表達的概念就是：這是從第 BeginLineIndex 列開始的頁標題。

要注意的是，如果使用者在雙視編輯時，在原本的點字文件中刪除一列，將導致 BeginLineIndex 不正確。例如，原本的文件是：

    aaa
    bbb
    <標題>xyz</標題>
    ccc
    ddd

轉成點字後，BeginLineIndex 會是 3（指向 "ccc" 那一列）。可是如果使用者在雙視編輯時，刪除了 "bbb" 那一列，那麼 BeginLineIndex 就會指到 "ddd" 去了。為了確保標題列能永遠正確地「黏住」標題列，必須再用一個 BrailleLine 物件參考記住標題列下方的那一列（BeginLine，稱為「標題起始列」）。BeginLineIndex 和 BeginLine 必須交互確認與修正，以確保能夠取到正確的標題列。







